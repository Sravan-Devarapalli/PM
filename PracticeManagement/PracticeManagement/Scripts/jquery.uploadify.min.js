var flashVer=-1;
if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var swVer2=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";
var flashDescription=navigator.plugins["Shockwave Flash"+swVer2].description;
var descArray=flashDescription.split(" ");
var tempArrayMajor=descArray[2].split(".");
var versionMajor=tempArrayMajor[0];
var versionMinor=tempArrayMajor[1];
var versionRevision=descArray[3];
if(versionRevision==""){versionRevision=descArray[4]
}if(versionRevision[0]=="d"){versionRevision=versionRevision.substring(1)
}else{if(versionRevision[0]=="r"){ersionRevision=versionRevision.substring(1);
if(versionRevision.indexOf("d")>0){versionRevision=versionRevision.substring(0,versionRevision.indexOf("d"))
}}}var flashVer=versionMajor+"."+versionMinor+"."+versionRevision;
flashVer=flashVer.split(".")[0]
}}else{if($.browser.msie){var version;
var axo;
var e;
try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");
version=axo.GetVariable("$version");
flashVer=version.replace("WIN ","").replace(",",".");
flashVer=flashVer.split(".")[0]
}catch(e){}}}if(jQuery){(function(b){b.extend(b.fn,{fileUpload:function(a){if(flashVer>=9){b(this).each(function(){settings=b.extend({uploader:"uploader.swf",script:"uploader.php",folder:"",height:30,width:110,cancelImg:"cancel.png",wmode:"opaque",scriptAccess:"sameDomain",fileDataName:"Filedata",displayData:"percentage",onInit:function(){},onSelect:function(){},onCheck:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onCancelComplete:function(){},onErrorComplete:function(){}},a);
var i=location.pathname;
i=i.split("/");
i.pop();
i=i.join("/")+"/";
var j="&pagepath="+i;
if(settings.buttonImg){j+="&buttonImg="+escape(settings.buttonImg)
}if(settings.buttonText){j+="&buttonText="+escape(settings.buttonText)
}if(settings.rollover){j+="&rollover=true"
}j+="&script="+settings.script;
j+="&folder="+escape(settings.folder);
if(settings.scriptData){var k="";
for(var h in settings.scriptData){k+="&"+h+"="+settings.scriptData[h]
}j+="&scriptData="+escape(k)
}j+="&btnWidth="+settings.width;
j+="&btnHeight="+settings.height;
j+="&wmode="+settings.wmode;
if(settings.hideButton){j+="&hideButton=true"
}if(settings.fileDesc){j+="&fileDesc="+settings.fileDesc+"&fileExt="+settings.fileExt
}if(settings.multi){j+="&multi=true"
}if(settings.auto){j+="&auto=true"
}if(settings.sizeLimit){j+="&sizeLimit="+settings.sizeLimit
}if(settings.allowSpecialChars){j+="&allowSpecialChars="+settings.allowSpecialChars
}if(settings.ValidChars){j+="&ValidChars="+settings.ValidChars
}if(settings.simUploadLimit){j+="&simUploadLimit="+settings.simUploadLimit
}if(settings.checkScript){j+="&checkScript="+settings.checkScript
}if(settings.fileDataName){j+="&fileDataName="+settings.fileDataName
}if(b.browser.msie){flashElement='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+settings.width+'" height="'+settings.height+'" id="'+b(this).attr("id")+'Uploader" class="fileUploaderBtn"><param name="movie" value="'+settings.uploader+"?fileUploadID="+b(this).attr("id")+j+'" /><param name="quality" value="high" /><param name="wmode" value="'+settings.wmode+'" /><param name="allowScriptAccess" value="'+settings.scriptAccess+'"><param name="swfversion" value="9.0.0.0" /></object>'
}else{flashElement='<embed src="'+settings.uploader+"?fileUploadID="+b(this).attr("id")+j+'" quality="high" width="'+settings.width+'" height="'+settings.height+'" id="'+b(this).attr("id")+'Uploader" class="fileUploaderBtn" name="'+b(this).attr("id")+'Uploader" allowScriptAccess="'+settings.scriptAccess+'" wmode="'+settings.wmode+'" type="application/x-shockwave-flash" />'
}if(settings.onInit()!==false){b(this).css("display","none");
if(b.browser.msie){b(this).after('<div id="'+b(this).attr("id")+'Uploader"></div>');
document.getElementById(b(this).attr("id")+"Uploader").outerHTML=flashElement
}else{b(this).after(flashElement)
}b("#"+b(this).attr("id")+"Uploader").after('<div id="'+b(this).attr("id")+'Queue" class="fileUploadQueue"></div>')
}b(this).bind("rfuSelect",{action:settings.onSelect},function(f,c,d){if(f.data.action(f,c,d)!==false){var g=Math.round(d.size/1024*100)*0.01;
var n="KB";
if(g>1000){g=Math.round(g*0.001*100)*0.01;
n="MB"
}var o=g.toString().split(".");
if(o.length>1){g=o[0]+"."+o[1].substr(0,2)
}else{g=o[0]
}if(d.name.length>40){fileName=d.name.substr(0,40)+"..."
}else{fileName=d.name
}b("#"+b(this).attr("id")+"Queue").append('<div id="'+b(this).attr("id")+c+'" class="fileUploadQueueItem"><div class="cancel"><a href="javascript:$(\'#'+b(this).attr("id")+"').fileUploadCancel('"+c+'\')"><img src="'+settings.cancelImg+'" border="0" /></a></div><span class="fileName" title="'+d.name+'">'+fileName+" ("+g+n+')</span><span class="percentage">&nbsp;</span><div class="fileUploadProgress" style="width: 100%;"><div id="'+b(this).attr("id")+c+'ProgressBar" class="fileUploadProgressBar" style="width: 1px; height: 3px;"></div></div></div>')
}});
if(typeof(settings.onSelectOnce)=="function"){b(this).bind("rfuSelectOnce",settings.onSelectOnce)
}b(this).bind("rfuCheckExist",{action:settings.onCheck},function(q,p,f,g,s){var d=new Object();
d.folder=i+g;
for(var c in f){d[c]=f[c];
if(s){var r=c
}}b.post(p,d,function(n){for(var l in n){if(q.data.action(q,p,f,g,s)!==false){var m=confirm("Do you want to replace the file '"+n[l]+"'?");
if(!m){document.getElementById(b(q.target).attr("id")+"Uploader").cancelFileUpload(l)
}}}if(s){document.getElementById(b(q.target).attr("id")+"Uploader").startFileUpload(r,true)
}else{document.getElementById(b(q.target).attr("id")+"Uploader").startFileUpload(null,true)
}},"json")
});
b(this).bind("rfuCancel",{action:settings.onCancel},function(f,c,d,g){if(f.data.action(f,c,d,g)!==false){b("#"+b(this).attr("id")+c).remove();
settings.onCancelComplete()
}});
b(this).bind("rfuClearQueue",{action:settings.onClearQueue},function(){if(event.data.action()!==false){b("#"+b(this).attr("id")+"Queue").contents().fadeOut(250,function(){b("#"+b(this).attr("id")+"Queue").empty()
})
}});
b(this).bind("rfuError",{action:settings.onError},function(l,d,g,f){if(l.data.action(l,d,g,f)!==false){var c=g.name;
if(c.length>40){c=g.name.substr(0,40)+"..."
}if("File name voilation"==f.type){b("#"+b(this).attr("id")+d+" .fileName").text("Warning: Please remove any special characters from your file name before uploading to Practice Management");
b("#"+b(this).attr("id")+d).removeClass().addClass("WarningFile")
}else{b("#"+b(this).attr("id")+d+" .fileName").text(f.type+" Error - "+c);
b("#"+b(this).attr("id")+d).removeClass().addClass("errorFile")
}b("#"+b(this).attr("id")+d+"ProgressBar").css({"background-color":"#FDE5DD"});
settings.onErrorComplete()
}});
b(this).bind("rfuProgress",{action:settings.onProgress,toDisplay:settings.displayData},function(f,c,d,g){if(f.data.action(f,c,d,g)!==false){b("#"+b(this).attr("id")+c+"ProgressBar").css("width",g.percentage+"%");
if(f.data.toDisplay=="percentage"){displayData=" - "+g.percentage+"%"
}if(f.data.toDisplay=="speed"){displayData=" - "+g.speed+"KB/s"
}if(f.data.toDisplay==null){displayData=" "
}b("#"+b(this).attr("id")+c+" .percentage").text(displayData)
}});
b(this).bind("rfuComplete",{action:settings.onComplete},function(g,c,f,d,m){if(g.data.action(g,c,f,unescape(d),m)!==false){b("#"+b(this).attr("id")+c).fadeOut(250,function(){b("#"+b(this).attr("id")+c).remove()
});
b("#"+b(this).attr("id")+c+" .percentage").text(" - Completed")
}});
if(typeof(settings.onAllComplete)=="function"){b(this).bind("rfuAllComplete",settings.onAllComplete)
}})
}},fileUploadSettings:function(a,d){b(this).each(function(){document.getElementById(b(this).attr("id")+"Uploader").updateSettings(a,d)
})
},fileUploadStart:function(a){b(this).each(function(){document.getElementById(b(this).attr("id")+"Uploader").startFileUpload(a,false)
})
},fileUploadCancel:function(a){b(this).each(function(){document.getElementById(b(this).attr("id")+"Uploader").cancelFileUpload(a)
})
},fileUploadClearQueue:function(){b(this).each(function(){document.getElementById(b(this).attr("id")+"Uploader").clearFileUploadQueue()
})
}})
})(jQuery)
};
