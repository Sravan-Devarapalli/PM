CREATE PROCEDURE [dbo].[CheckPersonTimeEntriesAfterHireDate]
(
@PersonId INT
)
AS
BEGIN
	DECLARE @TimeEntriesExists BIT,
			@HireDate Date 

			SELECT @HireDate = p.HireDate
			FROM dbo.Person AS p
			WHERE p.PersonId = @PersonId

	IF EXISTS(
				SELECT 1 FROM dbo.TimeEntry TE
				WHERE TE.PersonId = @PersonId AND TE.ChargeCodeDate > @HireDate AND TE.IsAutoGenerated <> 1
			 )

		SET @TimeEntriesExists  = 1
	ELSE
		SET @TimeEntriesExists = 0

	SELECT @TimeEntriesExists
END
	
